@page "/dynamic-form"

@using VxFormGenerator.Core
@using System.Dynamic
@using VxFormGenerator.Components.Plain.Models

<h1>Dynamic Based Form Demo</h1>

<div class="card">
    <div class="card-body">
        <h5 class="card-title">Generated by dynamic ExpandoObject</h5>

        <EditForm Model="_model"
                  OnValidSubmit="HandleValidSubmit"
                  OnInvalidSubmit="HandleInValidSubmit">
            <RenderFormElements></RenderFormElements>

            <button class="btn btn-primary" type="submit">Submit</button>
        </EditForm>
    </div>
</div>


@code{

    /// <summary>
    /// Model that is used for the form
    /// </summary>
    private readonly dynamic _model = new ExpandoObject();


    protected override void OnInitialized()
    {
        var dict = (IDictionary<String, Object>)_model;
        dict.Add("Name", "add");
        dict.Add("Note", "This is a note");
        dict.Add("Date", DateTime.Now);
        dict.Add("Amount", 1);
        dict.Add("Color", new VxColor("#fff"));

    }

    /// <summary>
    /// Will handle the submit action of the form
    /// </summary>
    /// <param name="context">The model with values as entered in the form</param>
    private void HandleValidSubmit(EditContext context)
    {
        // save your changes
    }

    private void HandleInValidSubmit(EditContext context)
    {


    }

}
